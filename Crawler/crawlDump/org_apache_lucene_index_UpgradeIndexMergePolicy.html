<DOC>
<DOCNO> crawlDump/org_apache_lucene_index_UpgradeIndexMergePolicy.html </DOCNO>
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" SYSTEM "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
 <head>
  <!-- Generated by javadoc (version 1.7.0_01) on Wed Apr 11 21:46:50 EDT 2012 -->
  <meta charset="utf-8" content="text/html" http-equiv="Content-Type" />
  <title>
   UpgradeIndexMergePolicy (Lucene 3.6.0 API)
  </title>
  <meta content="2012-04-11" name="date" />
  <link href="../../../../stylesheet.css" rel="stylesheet" title="Style" type="text/css" />
 </head>
 <body>
  <script type="text/javascript">
   <!--
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="UpgradeIndexMergePolicy (Lucene 3.6.0 API)";
    }
//-->
  </script>
  <noscript>
   <div>
    JavaScript is disabled on your browser.
   </div>
  </noscript>
  <!-- ========= START OF TOP NAVBAR ======= -->
  <div class="topNav">
   <a name="navbar_top">
    <!-- -->
   </a>
   <a href="#skip-navbar_top" title="Skip navigation links">
   </a>
   <a name="navbar_top_firstrow">
    <!-- -->
   </a>
   <ul class="navList" title="Navigation">
    <li>
     <a href="../../../../overview-summary.html">
      Overview
     </a>
    </li>
    <li>
     <a href="package-summary.html">
      Package
     </a>
    </li>
    <li class="navBarCell1Rev">
     Class
    </li>
    <li>
     <a href="class-use/UpgradeIndexMergePolicy.html">
      Use
     </a>
    </li>
    <li>
     <a href="package-tree.html">
      Tree
     </a>
    </li>
    <li>
     <a href="../../../../deprecated-list.html">
      Deprecated
     </a>
    </li>
    <li>
     <a href="../../../../index-all.html">
      Index
     </a>
    </li>
    <li>
     <a href="../../../../help-doc.html">
      Help
     </a>
    </li>
   </ul>
  </div>
  <div class="subNav">
   <ul class="navList">
    <li>
     <a href="../../../../org/apache/lucene/index/TieredMergePolicy.MergeScore.html" title="class in org.apache.lucene.index">
      <span class="strong">
       Prev Class
      </span>
     </a>
    </li>
    <li>
     Next Class
    </li>
   </ul>
   <ul class="navList">
    <li>
     <a href="../../../../index.html?org/apache/lucene/index/UpgradeIndexMergePolicy.html" target="_top">
      Frames
     </a>
    </li>
    <li>
     <a href="UpgradeIndexMergePolicy.html" target="_top">
      No Frames
     </a>
    </li>
   </ul>
   <ul class="navList" id="allclasses_navbar_top">
    <li>
     <a href="../../../../allclasses-noframe.html">
      All Classes
     </a>
    </li>
   </ul>
   <div>
    <script type="text/javascript">
     <!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
    </script>
   </div>
   <div>
    <ul class="subNavList">
     <li>
      Summary:
     </li>
     <li>
      <a href="#nested_classes_inherited_from_class_org.apache.lucene.index.MergePolicy">
       Nested
      </a>
      |
     </li>
     <li>
      <a href="#field_summary">
       Field
      </a>
      |
     </li>
     <li>
      <a href="#constructor_summary">
       Constr
      </a>
      |
     </li>
     <li>
      <a href="#method_summary">
       Method
      </a>
     </li>
    </ul>
    <ul class="subNavList">
     <li>
      Detail:
     </li>
     <li>
      <a href="#field_detail">
       Field
      </a>
      |
     </li>
     <li>
      <a href="#constructor_detail">
       Constr
      </a>
      |
     </li>
     <li>
      <a href="#method_detail">
       Method
      </a>
     </li>
    </ul>
   </div>
   <a name="skip-navbar_top">
    <!-- -->
   </a>
  </div>
  <!-- ========= END OF TOP NAVBAR ========= -->
  <!-- ======== START OF CLASS DATA ======== -->
  <div class="header">
   <div class="subTitle">
    org.apache.lucene.index
   </div>
   <h2 class="title" title="Class UpgradeIndexMergePolicy">
    Class UpgradeIndexMergePolicy
   </h2>
  </div>
  <div class="contentContainer">
   <ul class="inheritance">
    <li>
     <a href="http://download.oracle.com/javase/1.5.0/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">
      java.lang.Object
     </a>
    </li>
    <li>
     <ul class="inheritance">
      <li>
       <a href="../../../../org/apache/lucene/index/MergePolicy.html" title="class in org.apache.lucene.index">
        org.apache.lucene.index.MergePolicy
       </a>
      </li>
      <li>
       <ul class="inheritance">
        <li>
         org.apache.lucene.index.UpgradeIndexMergePolicy
        </li>
       </ul>
      </li>
     </ul>
    </li>
   </ul>
   <div class="description">
    <ul class="blockList">
     <li class="blockList">
      <dl>
       <dt>
        All Implemented Interfaces:
       </dt>
       <dd>
        <a href="http://download.oracle.com/javase/1.5.0/docs/api/java/io/Closeable.html?is-external=true" title="class or interface in java.io">
         Closeable
        </a>
       </dd>
      </dl>
      <hr />
      <br />
      <pre>
       public class
       <span class="strong">
        UpgradeIndexMergePolicy
       </span>
       extends
       <a href="../../../../org/apache/lucene/index/MergePolicy.html" title="class in org.apache.lucene.index">
        MergePolicy
       </a>
      </pre>
      <div class="block">
       This
       <a href="../../../../org/apache/lucene/index/MergePolicy.html" title="class in org.apache.lucene.index">
        <code>
         MergePolicy
        </code>
       </a>
       is used for upgrading all existing segments of
 an index when calling
       <a href="../../../../org/apache/lucene/index/IndexWriter.html#forceMerge(int)">
        <code>
         IndexWriter.forceMerge(int)
        </code>
       </a>
       .
 All other methods delegate to the base
       <code>
        MergePolicy
       </code>
       given to the constructor.
 This allows for an as-cheap-as possible upgrade of an older index by only upgrading segments that
 are created by previous Lucene versions. forceMerge does no longer really merge;
 it is just used to "forceMerge" older segment versions away.
       <p>
        In general one would use
        <a href="../../../../org/apache/lucene/index/IndexUpgrader.html" title="class in org.apache.lucene.index">
         <code>
          IndexUpgrader
         </code>
        </a>
        , but for a fully customizeable upgrade,
 you can use this like any other
        <code>
         MergePolicy
        </code>
        and call
        <a href="../../../../org/apache/lucene/index/IndexWriter.html#forceMerge(int)">
         <code>
          IndexWriter.forceMerge(int)
         </code>
        </a>
        :
       </p>
       <pre class="prettyprint lang-java">
        IndexWriterConfig iwc = new IndexWriterConfig(Version.LUCENE_XX, new KeywordAnalyzer());
  iwc.setMergePolicy(new UpgradeIndexMergePolicy(iwc.getMergePolicy()));
  IndexWriter w = new IndexWriter(dir, iwc);
  w.forceMerge(1);
  w.close();
       </pre>
       <p>
        <b>
         Warning:
        </b>
        This merge policy may reorder documents if the index was partially
 upgraded before calling forceMerge (e.g., documents were added). If your application relies
 on "monotonicity" of doc IDs (which means that the order in which the documents
 were added to the index is preserved), do a forceMerge(1) instead. Please note, the
 delegate
        <code>
         MergePolicy
        </code>
        may also reorder documents.
       </p>
      </div>
      <dl>
       <dt>
        <span class="strong">
         See Also:
        </span>
       </dt>
       <dd>
        <a href="../../../../org/apache/lucene/index/IndexUpgrader.html" title="class in org.apache.lucene.index">
         <code>
          IndexUpgrader
         </code>
        </a>
       </dd>
       <dt>
        <span class="strong">
         WARNING: This API is experimental and might change in incompatible ways in the next release.
        </span>
       </dt>
       <dd>
       </dd>
      </dl>
     </li>
    </ul>
   </div>
   <div class="summary">
    <ul class="blockList">
     <li class="blockList">
      <!-- ======== NESTED CLASS SUMMARY ======== -->
      <ul class="blockList">
       <li class="blockList">
        <a name="nested_class_summary">
         <!-- -->
        </a>
        <h3>
         Nested Class Summary
        </h3>
        <ul class="blockList">
         <li class="blockList">
          <a name="nested_classes_inherited_from_class_org.apache.lucene.index.MergePolicy">
           <!-- -->
          </a>
          <h3>
           Nested classes/interfaces inherited from classÂ org.apache.lucene.index.
           <a href="../../../../org/apache/lucene/index/MergePolicy.html" title="class in org.apache.lucene.index">
            MergePolicy
           </a>
          </h3>
          <code>
           <a href="../../../../org/apache/lucene/index/MergePolicy.MergeAbortedException.html" title="class in org.apache.lucene.index">
            MergePolicy.MergeAbortedException
           </a>
           ,
           <a href="../../../../org/apache/lucene/index/MergePolicy.MergeException.html" title="class in org.apache.lucene.index">
            MergePolicy.MergeException
           </a>
           ,
           <a href="../../../../org/apache/lucene/index/MergePolicy.MergeSpecification.html" title="class in org.apache.lucene.index">
            MergePolicy.MergeSpecification
           </a>
           ,
           <a href="../../../../org/apache/lucene/index/MergePolicy.OneMerge.html" title="class in org.apache.lucene.index">
            MergePolicy.OneMerge
           </a>
          </code>
         </li>
        </ul>
       </li>
      </ul>
      <!-- =========== FIELD SUMMARY =========== -->
      <ul class="blockList">
       <li class="blockList">
        <a name="field_summary">
         <!-- -->
        </a>
        <h3>
         Field Summary
        </h3>
        <table border="0" cellpadding="3" cellspacing="0" class="overviewSummary" summary="Field Summary table, listing fields, and an explanation">
         <caption>
          <span>
           Fields
          </span>
          <span class="tabEnd">
          </span>
         </caption>
         <tr>
          <th class="colFirst" scope="col">
           Modifier and Type
          </th>
          <th class="colLast" scope="col">
           Field and Description
          </th>
         </tr>
         <tr class="altColor">
          <td class="colFirst">
           <code>
            protected
            <a href="../../../../org/apache/lucene/index/MergePolicy.html" title="class in org.apache.lucene.index">
             MergePolicy
            </a>
           </code>
          </td>
          <td class="colLast">
           <code>
            <strong>
             <a href="../../../../org/apache/lucene/index/UpgradeIndexMergePolicy.html#base">
              base
             </a>
            </strong>
           </code>
          </td>
         </tr>
        </table>
        <ul class="blockList">
         <li class="blockList">
          <a name="fields_inherited_from_class_org.apache.lucene.index.MergePolicy">
           <!-- -->
          </a>
          <h3>
           Fields inherited from classÂ org.apache.lucene.index.
           <a href="../../../../org/apache/lucene/index/MergePolicy.html" title="class in org.apache.lucene.index">
            MergePolicy
           </a>
          </h3>
          <code>
           <a href="../../../../org/apache/lucene/index/MergePolicy.html#writer">
            writer
           </a>
          </code>
         </li>
        </ul>
       </li>
      </ul>
      <!-- ======== CONSTRUCTOR SUMMARY ======== -->
      <ul class="blockList">
       <li class="blockList">
        <a name="constructor_summary">
         <!-- -->
        </a>
        <h3>
         Constructor Summary
        </h3>
        <table border="0" cellpadding="3" cellspacing="0" class="overviewSummary" summary="Constructor Summary table, listing constructors, and an explanation">
         <caption>
          <span>
           Constructors
          </span>
          <span class="tabEnd">
          </span>
         </caption>
         <tr>
          <th class="colOne" scope="col">
           Constructor and Description
          </th>
         </tr>
         <tr class="altColor">
          <td class="colOne">
           <code>
            <strong>
             <a href="../../../../org/apache/lucene/index/UpgradeIndexMergePolicy.html#UpgradeIndexMergePolicy(org.apache.lucene.index.MergePolicy)">
              UpgradeIndexMergePolicy
             </a>
            </strong>
            (
            <a href="../../../../org/apache/lucene/index/MergePolicy.html" title="class in org.apache.lucene.index">
             MergePolicy
            </a>
            base)
           </code>
           <div class="block">
            Wrap the given
            <a href="../../../../org/apache/lucene/index/MergePolicy.html" title="class in org.apache.lucene.index">
             <code>
              MergePolicy
             </code>
            </a>
            and intercept forceMerge requests to
 only upgrade segments written with previous Lucene versions.
           </div>
          </td>
         </tr>
        </table>
       </li>
      </ul>
      <!-- ========== METHOD SUMMARY =========== -->
      <ul class="blockList">
       <li class="blockList">
        <a name="method_summary">
         <!-- -->
        </a>
        <h3>
         Method Summary
        </h3>
        <table border="0" cellpadding="3" cellspacing="0" class="overviewSummary" summary="Method Summary table, listing methods, and an explanation">
         <caption>
          <span>
           Methods
          </span>
          <span class="tabEnd">
          </span>
         </caption>
         <tr>
          <th class="colFirst" scope="col">
           Modifier and Type
          </th>
          <th class="colLast" scope="col">
           Method and Description
          </th>
         </tr>
         <tr class="altColor">
          <td class="colFirst">
           <code>
            void
           </code>
          </td>
          <td class="colLast">
           <code>
            <strong>
             <a href="../../../../org/apache/lucene/index/UpgradeIndexMergePolicy.html#close()">
              close
             </a>
            </strong>
            ()
           </code>
           <div class="block">
            Release all resources for the policy.
           </div>
          </td>
         </tr>
         <tr class="rowColor">
          <td class="colFirst">
           <code>
            <a href="../../../../org/apache/lucene/index/MergePolicy.MergeSpecification.html" title="class in org.apache.lucene.index">
             MergePolicy.MergeSpecification
            </a>
           </code>
          </td>
          <td class="colLast">
           <code>
            <strong>
             <a href="../../../../org/apache/lucene/index/UpgradeIndexMergePolicy.html#findForcedDeletesMerges(org.apache.lucene.index.SegmentInfos)">
              findForcedDeletesMerges
             </a>
            </strong>
            (
            <a href="../../../../org/apache/lucene/index/SegmentInfos.html" title="class in org.apache.lucene.index">
             SegmentInfos
            </a>
            segmentInfos)
           </code>
           <div class="block">
            Determine what set of merge operations is necessary in order to expunge all
 deletes from the index.
           </div>
          </td>
         </tr>
         <tr class="altColor">
          <td class="colFirst">
           <code>
            <a href="../../../../org/apache/lucene/index/MergePolicy.MergeSpecification.html" title="class in org.apache.lucene.index">
             MergePolicy.MergeSpecification
            </a>
           </code>
          </td>
          <td class="colLast">
           <code>
            <strong>
             <a href="../../../../org/apache/lucene/index/UpgradeIndexMergePolicy.html#findForcedMerges(org.apache.lucene.index.SegmentInfos, int, java.util.Map)">
              findForcedMerges
             </a>
            </strong>
            (
            <a href="../../../../org/apache/lucene/index/SegmentInfos.html" title="class in org.apache.lucene.index">
             SegmentInfos
            </a>
            segmentInfos,
                intÂ maxSegmentCount,
            <a href="http://download.oracle.com/javase/1.5.0/docs/api/java/util/Map.html?is-external=true" title="class or interface in java.util">
             Map
            </a>
            <
            <a href="../../../../org/apache/lucene/index/SegmentInfo.html" title="class in org.apache.lucene.index">
             SegmentInfo
            </a>
            ,
            <a href="http://download.oracle.com/javase/1.5.0/docs/api/java/lang/Boolean.html?is-external=true" title="class or interface in java.lang">
             Boolean
            </a>
            >Â segmentsToMerge)
           </code>
           <div class="block">
            Determine what set of merge operations is necessary in
 order to merge to
           </div>
          </td>
         </tr>
         <tr class="rowColor">
          <td class="colFirst">
           <code>
            <a href="../../../../org/apache/lucene/index/MergePolicy.MergeSpecification.html" title="class in org.apache.lucene.index">
             MergePolicy.MergeSpecification
            </a>
           </code>
          </td>
          <td class="colLast">
           <code>
            <strong>
             <a href="../../../../org/apache/lucene/index/UpgradeIndexMergePolicy.html#findMerges(org.apache.lucene.index.SegmentInfos)">
              findMerges
             </a>
            </strong>
            (
            <a href="../../../../org/apache/lucene/index/SegmentInfos.html" title="class in org.apache.lucene.index">
             SegmentInfos
            </a>
            segmentInfos)
           </code>
           <div class="block">
            Determine what set of merge operations are now necessary on the index.
           </div>
          </td>
         </tr>
         <tr class="altColor">
          <td class="colFirst">
           <code>
            void
           </code>
          </td>
          <td class="colLast">
           <code>
            <strong>
             <a href="../../../../org/apache/lucene/index/UpgradeIndexMergePolicy.html#setIndexWriter(org.apache.lucene.index.IndexWriter)">
              setIndexWriter
             </a>
            </strong>
            (
            <a href="../../../../org/apache/lucene/index/IndexWriter.html" title="class in org.apache.lucene.index">
             IndexWriter
            </a>
            writer)
           </code>
           <div class="block">
            Sets the
            <a href="../../../../org/apache/lucene/index/IndexWriter.html" title="class in org.apache.lucene.index">
             <code>
              IndexWriter
             </code>
            </a>
            to use by this merge policy.
           </div>
          </td>
         </tr>
         <tr class="rowColor">
          <td class="colFirst">
           <code>
            protected boolean
           </code>
          </td>
          <td class="colLast">
           <code>
            <strong>
             <a href="../../../../org/apache/lucene/index/UpgradeIndexMergePolicy.html#shouldUpgradeSegment(org.apache.lucene.index.SegmentInfo)">
              shouldUpgradeSegment
             </a>
            </strong>
            (
            <a href="../../../../org/apache/lucene/index/SegmentInfo.html" title="class in org.apache.lucene.index">
             SegmentInfo
            </a>
            si)
           </code>
           <div class="block">
            Returns if the given segment should be upgraded.
           </div>
          </td>
         </tr>
         <tr class="altColor">
          <td class="colFirst">
           <code>
            <a href="http://download.oracle.com/javase/1.5.0/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">
             String
            </a>
           </code>
          </td>
          <td class="colLast">
           <code>
            <strong>
             <a href="../../../../org/apache/lucene/index/UpgradeIndexMergePolicy.html#toString()">
              toString
             </a>
            </strong>
            ()
           </code>
          </td>
         </tr>
         <tr class="rowColor">
          <td class="colFirst">
           <code>
            boolean
           </code>
          </td>
          <td class="colLast">
           <code>
            <strong>
             <a href="../../../../org/apache/lucene/index/UpgradeIndexMergePolicy.html#useCompoundFile(org.apache.lucene.index.SegmentInfos, org.apache.lucene.index.SegmentInfo)">
              useCompoundFile
             </a>
            </strong>
            (
            <a href="../../../../org/apache/lucene/index/SegmentInfos.html" title="class in org.apache.lucene.index">
             SegmentInfos
            </a>
            segments,
            <a href="../../../../org/apache/lucene/index/SegmentInfo.html" title="class in org.apache.lucene.index">
             SegmentInfo
            </a>
            newSegment)
           </code>
           <div class="block">
            Returns true if a new segment (regardless of its origin) should use the compound file format.
           </div>
          </td>
         </tr>
        </table>
        <ul class="blockList">
         <li class="blockList">
          <a name="methods_inherited_from_class_java.lang.Object">
           <!-- -->
          </a>
          <h3>
           Methods inherited from classÂ java.lang.
           <a href="http://download.oracle.com/javase/1.5.0/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">
            Object
           </a>
          </h3>
          <code>
           <a href="http://download.oracle.com/javase/1.5.0/docs/api/java/lang/Object.html?is-external=true#clone()" title="class or interface in java.lang">
            clone
           </a>
           ,
           <a href="http://download.oracle.com/javase/1.5.0/docs/api/java/lang/Object.html?is-external=true#equals(java.lang.Object)" title="class or interface in java.lang">
            equals
           </a>
           ,
           <a href="http://download.oracle.com/javase/1.5.0/docs/api/java/lang/Object.html?is-external=true#finalize()" title="class or interface in java.lang">
            finalize
           </a>
           ,
           <a href="http://download.oracle.com/javase/1.5.0/docs/api/java/lang/Object.html?is-external=true#getClass()" title="class or interface in java.lang">
            getClass
           </a>
           ,
           <a href="http://download.oracle.com/javase/1.5.0/docs/api/java/lang/Object.html?is-external=true#hashCode()" title="class or interface in java.lang">
            hashCode
           </a>
           ,
           <a href="http://download.oracle.com/javase/1.5.0/docs/api/java/lang/Object.html?is-external=true#notify()" title="class or interface in java.lang">
            notify
           </a>
           ,
           <a href="http://download.oracle.com/javase/1.5.0/docs/api/java/lang/Object.html?is-external=true#notifyAll()" title="class or interface in java.lang">
            notifyAll
           </a>
           ,
           <a href="http://download.oracle.com/javase/1.5.0/docs/api/java/lang/Object.html?is-external=true#wait()" title="class or interface in java.lang">
            wait
           </a>
           ,
           <a href="http://download.oracle.com/javase/1.5.0/docs/api/java/lang/Object.html?is-external=true#wait(long)" title="class or interface in java.lang">
            wait
           </a>
           ,
           <a href="http://download.oracle.com/javase/1.5.0/docs/api/java/lang/Object.html?is-external=true#wait(long, int)" title="class or interface in java.lang">
            wait
           </a>
          </code>
         </li>
        </ul>
       </li>
      </ul>
     </li>
    </ul>
   </div>
   <div class="details">
    <ul class="blockList">
     <li class="blockList">
      <!-- ============ FIELD DETAIL =========== -->
      <ul class="blockList">
       <li class="blockList">
        <a name="field_detail">
         <!-- -->
        </a>
        <h3>
         Field Detail
        </h3>
        <a name="base">
         <!-- -->
        </a>
        <ul class="blockListLast">
         <li class="blockList">
          <h4>
           base
          </h4>
          <pre>
           protected final
           <a href="../../../../org/apache/lucene/index/MergePolicy.html" title="class in org.apache.lucene.index">
            MergePolicy
           </a>
           base
          </pre>
         </li>
        </ul>
       </li>
      </ul>
      <!-- ========= CONSTRUCTOR DETAIL ======== -->
      <ul class="blockList">
       <li class="blockList">
        <a name="constructor_detail">
         <!-- -->
        </a>
        <h3>
         Constructor Detail
        </h3>
        <a name="UpgradeIndexMergePolicy(org.apache.lucene.index.MergePolicy)">
         <!-- -->
        </a>
        <ul class="blockListLast">
         <li class="blockList">
          <h4>
           UpgradeIndexMergePolicy
          </h4>
          <pre>
           publicÂ UpgradeIndexMergePolicy(
           <a href="../../../../org/apache/lucene/index/MergePolicy.html" title="class in org.apache.lucene.index">
            MergePolicy
           </a>
           base)
          </pre>
          <div class="block">
           Wrap the given
           <a href="../../../../org/apache/lucene/index/MergePolicy.html" title="class in org.apache.lucene.index">
            <code>
             MergePolicy
            </code>
           </a>
           and intercept forceMerge requests to
 only upgrade segments written with previous Lucene versions.
          </div>
         </li>
        </ul>
       </li>
      </ul>
      <!-- ============ METHOD DETAIL ========== -->
      <ul class="blockList">
       <li class="blockList">
        <a name="method_detail">
         <!-- -->
        </a>
        <h3>
         Method Detail
        </h3>
        <a name="shouldUpgradeSegment(org.apache.lucene.index.SegmentInfo)">
         <!-- -->
        </a>
        <ul class="blockList">
         <li class="blockList">
          <h4>
           shouldUpgradeSegment
          </h4>
          <pre>
           protectedÂ booleanÂ shouldUpgradeSegment(
           <a href="../../../../org/apache/lucene/index/SegmentInfo.html" title="class in org.apache.lucene.index">
            SegmentInfo
           </a>
           si)
          </pre>
          <div class="block">
           Returns if the given segment should be upgraded. The default implementation
 will return
           <code>
            !Constants.LUCENE_MAIN_VERSION.equals(si.getVersion())
           </code>
           ,
 so all segments created with a different version number than this Lucene version will
 get upgraded.
          </div>
         </li>
        </ul>
        <a name="setIndexWriter(org.apache.lucene.index.IndexWriter)">
         <!-- -->
        </a>
        <ul class="blockList">
         <li class="blockList">
          <h4>
           setIndexWriter
          </h4>
          <pre>
           publicÂ voidÂ setIndexWriter(
           <a href="../../../../org/apache/lucene/index/IndexWriter.html" title="class in org.apache.lucene.index">
            IndexWriter
           </a>
           writer)
          </pre>
          <div class="block">
           <strong>
            Description copied from class:
            <code>
             <a href="../../../../org/apache/lucene/index/MergePolicy.html#setIndexWriter(org.apache.lucene.index.IndexWriter)">
              MergePolicy
             </a>
            </code>
           </strong>
          </div>
          <div class="block">
           Sets the
           <a href="../../../../org/apache/lucene/index/IndexWriter.html" title="class in org.apache.lucene.index">
            <code>
             IndexWriter
            </code>
           </a>
           to use by this merge policy. This method is
 allowed to be called only once, and is usually set by IndexWriter. If it is
 called more than once,
           <a href="../../../../org/apache/lucene/util/SetOnce.AlreadySetException.html" title="class in org.apache.lucene.util">
            <code>
             SetOnce.AlreadySetException
            </code>
           </a>
           is thrown.
          </div>
          <dl>
           <dt>
            <strong>
             Overrides:
            </strong>
           </dt>
           <dd>
            <code>
             <a href="../../../../org/apache/lucene/index/MergePolicy.html#setIndexWriter(org.apache.lucene.index.IndexWriter)">
              setIndexWriter
             </a>
            </code>
            in class
            <code>
             <a href="../../../../org/apache/lucene/index/MergePolicy.html" title="class in org.apache.lucene.index">
              MergePolicy
             </a>
            </code>
           </dd>
           <dt>
            <span class="strong">
             See Also:
            </span>
           </dt>
           <dd>
            <a href="../../../../org/apache/lucene/util/SetOnce.html" title="class in org.apache.lucene.util">
             <code>
              SetOnce
             </code>
            </a>
           </dd>
          </dl>
         </li>
        </ul>
        <a name="findMerges(org.apache.lucene.index.SegmentInfos)">
         <!-- -->
        </a>
        <ul class="blockList">
         <li class="blockList">
          <h4>
           findMerges
          </h4>
          <pre>
           public
           <a href="../../../../org/apache/lucene/index/MergePolicy.MergeSpecification.html" title="class in org.apache.lucene.index">
            MergePolicy.MergeSpecification
           </a>
           findMerges(
           <a href="../../../../org/apache/lucene/index/SegmentInfos.html" title="class in org.apache.lucene.index">
            SegmentInfos
           </a>
           segmentInfos)
                                          throws
           <a href="../../../../org/apache/lucene/index/CorruptIndexException.html" title="class in org.apache.lucene.index">
            CorruptIndexException
           </a>
           ,
           <a href="http://download.oracle.com/javase/1.5.0/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">
            IOException
           </a>
          </pre>
          <div class="block">
           <strong>
            Description copied from class:
            <code>
             <a href="../../../../org/apache/lucene/index/MergePolicy.html#findMerges(org.apache.lucene.index.SegmentInfos)">
              MergePolicy
             </a>
            </code>
           </strong>
          </div>
          <div class="block">
           Determine what set of merge operations are now necessary on the index.
           <a href="../../../../org/apache/lucene/index/IndexWriter.html" title="class in org.apache.lucene.index">
            <code>
             IndexWriter
            </code>
           </a>
           calls this whenever there is a change to the segments.
 This call is always synchronized on the
           <a href="../../../../org/apache/lucene/index/IndexWriter.html" title="class in org.apache.lucene.index">
            <code>
             IndexWriter
            </code>
           </a>
           instance so
 only one thread at a time will call this method.
          </div>
          <dl>
           <dt>
            <strong>
             Specified by:
            </strong>
           </dt>
           <dd>
            <code>
             <a href="../../../../org/apache/lucene/index/MergePolicy.html#findMerges(org.apache.lucene.index.SegmentInfos)">
              findMerges
             </a>
            </code>
            in class
            <code>
             <a href="../../../../org/apache/lucene/index/MergePolicy.html" title="class in org.apache.lucene.index">
              MergePolicy
             </a>
            </code>
           </dd>
           <dt>
            <span class="strong">
             Parameters:
            </span>
           </dt>
           <dd>
            <code>
             segmentInfos
            </code>
            - the total set of segments in the index
           </dd>
           <dt>
            <span class="strong">
             Throws:
            </span>
           </dt>
           <dd>
            <code>
             <a href="../../../../org/apache/lucene/index/CorruptIndexException.html" title="class in org.apache.lucene.index">
              CorruptIndexException
             </a>
            </code>
           </dd>
           <dd>
            <code>
             <a href="http://download.oracle.com/javase/1.5.0/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">
              IOException
             </a>
            </code>
           </dd>
          </dl>
         </li>
        </ul>
        <a name="findForcedMerges(org.apache.lucene.index.SegmentInfos, int, java.util.Map)">
         <!-- -->
        </a>
        <ul class="blockList">
         <li class="blockList">
          <h4>
           findForcedMerges
          </h4>
          <pre>
           public
           <a href="../../../../org/apache/lucene/index/MergePolicy.MergeSpecification.html" title="class in org.apache.lucene.index">
            MergePolicy.MergeSpecification
           </a>
           findForcedMerges(
           <a href="../../../../org/apache/lucene/index/SegmentInfos.html" title="class in org.apache.lucene.index">
            SegmentInfos
           </a>
           segmentInfos,
                                              intÂ maxSegmentCount,
           <a href="http://download.oracle.com/javase/1.5.0/docs/api/java/util/Map.html?is-external=true" title="class or interface in java.util">
            Map
           </a>
           <
           <a href="../../../../org/apache/lucene/index/SegmentInfo.html" title="class in org.apache.lucene.index">
            SegmentInfo
           </a>
           ,
           <a href="http://download.oracle.com/javase/1.5.0/docs/api/java/lang/Boolean.html?is-external=true" title="class or interface in java.lang">
            Boolean
           </a>
           >Â segmentsToMerge)
                                                throws
           <a href="../../../../org/apache/lucene/index/CorruptIndexException.html" title="class in org.apache.lucene.index">
            CorruptIndexException
           </a>
           ,
           <a href="http://download.oracle.com/javase/1.5.0/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">
            IOException
           </a>
          </pre>
          <div class="block">
           <strong>
            Description copied from class:
            <code>
             <a href="../../../../org/apache/lucene/index/MergePolicy.html#findForcedMerges(org.apache.lucene.index.SegmentInfos, int, java.util.Map)">
              MergePolicy
             </a>
            </code>
           </strong>
          </div>
          <div class="block">
           Determine what set of merge operations is necessary in
 order to merge to
           <code>
            IndexWriter
           </code>
           calls this when its
           <a href="../../../../org/apache/lucene/index/IndexWriter.html#forceMerge(int)">
            <code>
             IndexWriter.forceMerge(int)
            </code>
           </a>
           method is called. This call is always
 synchronized on the
           <a href="../../../../org/apache/lucene/index/IndexWriter.html" title="class in org.apache.lucene.index">
            <code>
             IndexWriter
            </code>
           </a>
           instance so only one thread at a
 time will call this method.
          </div>
          <dl>
           <dt>
            <strong>
             Specified by:
            </strong>
           </dt>
           <dd>
            <code>
             <a href="../../../../org/apache/lucene/index/MergePolicy.html#findForcedMerges(org.apache.lucene.index.SegmentInfos, int, java.util.Map)">
              findForcedMerges
             </a>
            </code>
            in class
            <code>
             <a href="../../../../org/apache/lucene/index/MergePolicy.html" title="class in org.apache.lucene.index">
              MergePolicy
             </a>
            </code>
           </dd>
           <dt>
            <span class="strong">
             Parameters:
            </span>
           </dt>
           <dd>
            <code>
             segmentInfos
            </code>
            - the total set of segments in the index
           </dd>
           <dd>
            <code>
             maxSegmentCount
            </code>
            - requested maximum number of segments in the index (currently this
          is always 1)
           </dd>
           <dd>
            <code>
             segmentsToMerge
            </code>
            - contains the specific SegmentInfo instances that must be merged
          away. This may be a subset of all
          SegmentInfos.  If the value is True for a
          given SegmentInfo, that means this segment was
          an original segment present in the
          to-be-merged index; else, it was a segment
          produced by a cascaded merge.
           </dd>
           <dt>
            <span class="strong">
             Throws:
            </span>
           </dt>
           <dd>
            <code>
             <a href="../../../../org/apache/lucene/index/CorruptIndexException.html" title="class in org.apache.lucene.index">
              CorruptIndexException
             </a>
            </code>
           </dd>
           <dd>
            <code>
             <a href="http://download.oracle.com/javase/1.5.0/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">
              IOException
             </a>
            </code>
           </dd>
          </dl>
         </li>
        </ul>
        <a name="findForcedDeletesMerges(org.apache.lucene.index.SegmentInfos)">
         <!-- -->
        </a>
        <ul class="blockList">
         <li class="blockList">
          <h4>
           findForcedDeletesMerges
          </h4>
          <pre>
           public
           <a href="../../../../org/apache/lucene/index/MergePolicy.MergeSpecification.html" title="class in org.apache.lucene.index">
            MergePolicy.MergeSpecification
           </a>
           findForcedDeletesMerges(
           <a href="../../../../org/apache/lucene/index/SegmentInfos.html" title="class in org.apache.lucene.index">
            SegmentInfos
           </a>
           segmentInfos)
                                                       throws
           <a href="../../../../org/apache/lucene/index/CorruptIndexException.html" title="class in org.apache.lucene.index">
            CorruptIndexException
           </a>
           ,
           <a href="http://download.oracle.com/javase/1.5.0/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">
            IOException
           </a>
          </pre>
          <div class="block">
           <strong>
            Description copied from class:
            <code>
             <a href="../../../../org/apache/lucene/index/MergePolicy.html#findForcedDeletesMerges(org.apache.lucene.index.SegmentInfos)">
              MergePolicy
             </a>
            </code>
           </strong>
          </div>
          <div class="block">
           Determine what set of merge operations is necessary in order to expunge all
 deletes from the index.
          </div>
          <dl>
           <dt>
            <strong>
             Specified by:
            </strong>
           </dt>
           <dd>
            <code>
             <a href="../../../../org/apache/lucene/index/MergePolicy.html#findForcedDeletesMerges(org.apache.lucene.index.SegmentInfos)">
              findForcedDeletesMerges
             </a>
            </code>
            in class
            <code>
             <a href="../../../../org/apache/lucene/index/MergePolicy.html" title="class in org.apache.lucene.index">
              MergePolicy
             </a>
            </code>
           </dd>
           <dt>
            <span class="strong">
             Parameters:
            </span>
           </dt>
           <dd>
            <code>
             segmentInfos
            </code>
            - the total set of segments in the index
           </dd>
           <dt>
            <span class="strong">
             Throws:
            </span>
           </dt>
           <dd>
            <code>
             <a href="../../../../org/apache/lucene/index/CorruptIndexException.html" title="class in org.apache.lucene.index">
              CorruptIndexException
             </a>
            </code>
           </dd>
           <dd>
            <code>
             <a href="http://download.oracle.com/javase/1.5.0/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">
              IOException
             </a>
            </code>
           </dd>
          </dl>
         </li>
        </ul>
        <a name="useCompoundFile(org.apache.lucene.index.SegmentInfos, org.apache.lucene.index.SegmentInfo)">
         <!-- -->
        </a>
        <ul class="blockList">
         <li class="blockList">
          <h4>
           useCompoundFile
          </h4>
          <pre>
           publicÂ booleanÂ useCompoundFile(
           <a href="../../../../org/apache/lucene/index/SegmentInfos.html" title="class in org.apache.lucene.index">
            SegmentInfos
           </a>
           segments,
           <a href="../../../../org/apache/lucene/index/SegmentInfo.html" title="class in org.apache.lucene.index">
            SegmentInfo
           </a>
           newSegment)
                        throws
           <a href="http://download.oracle.com/javase/1.5.0/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">
            IOException
           </a>
          </pre>
          <div class="block">
           <strong>
            Description copied from class:
            <code>
             <a href="../../../../org/apache/lucene/index/MergePolicy.html#useCompoundFile(org.apache.lucene.index.SegmentInfos, org.apache.lucene.index.SegmentInfo)">
              MergePolicy
             </a>
            </code>
           </strong>
          </div>
          <div class="block">
           Returns true if a new segment (regardless of its origin) should use the compound file format.
          </div>
          <dl>
           <dt>
            <strong>
             Specified by:
            </strong>
           </dt>
           <dd>
            <code>
             <a href="../../../../org/apache/lucene/index/MergePolicy.html#useCompoundFile(org.apache.lucene.index.SegmentInfos, org.apache.lucene.index.SegmentInfo)">
              useCompoundFile
             </a>
            </code>
            in class
            <code>
             <a href="../../../../org/apache/lucene/index/MergePolicy.html" title="class in org.apache.lucene.index">
              MergePolicy
             </a>
            </code>
           </dd>
           <dt>
            <span class="strong">
             Throws:
            </span>
           </dt>
           <dd>
            <code>
             <a href="http://download.oracle.com/javase/1.5.0/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">
              IOException
             </a>
            </code>
           </dd>
          </dl>
         </li>
        </ul>
        <a name="close()">
         <!-- -->
        </a>
        <ul class="blockList">
         <li class="blockList">
          <h4>
           close
          </h4>
          <pre>
           publicÂ voidÂ close()
          </pre>
          <div class="block">
           <strong>
            Description copied from class:
            <code>
             <a href="../../../../org/apache/lucene/index/MergePolicy.html#close()">
              MergePolicy
             </a>
            </code>
           </strong>
          </div>
          <div class="block">
           Release all resources for the policy.
          </div>
          <dl>
           <dt>
            <strong>
             Specified by:
            </strong>
           </dt>
           <dd>
            <code>
             <a href="http://download.oracle.com/javase/1.5.0/docs/api/java/io/Closeable.html?is-external=true#close()" title="class or interface in java.io">
              close
             </a>
            </code>
            in interface
            <code>
             <a href="http://download.oracle.com/javase/1.5.0/docs/api/java/io/Closeable.html?is-external=true" title="class or interface in java.io">
              Closeable
             </a>
            </code>
           </dd>
           <dt>
            <strong>
             Specified by:
            </strong>
           </dt>
           <dd>
            <code>
             <a href="../../../../org/apache/lucene/index/MergePolicy.html#close()">
              close
             </a>
            </code>
            in class
            <code>
             <a href="../../../../org/apache/lucene/index/MergePolicy.html" title="class in org.apache.lucene.index">
              MergePolicy
             </a>
            </code>
           </dd>
          </dl>
         </li>
        </ul>
        <a name="toString()">
         <!-- -->
        </a>
        <ul class="blockListLast">
         <li class="blockList">
          <h4>
           toString
          </h4>
          <pre>
           public
           <a href="http://download.oracle.com/javase/1.5.0/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">
            String
           </a>
           toString()
          </pre>
          <dl>
           <dt>
            <strong>
             Overrides:
            </strong>
           </dt>
           <dd>
            <code>
             <a href="http://download.oracle.com/javase/1.5.0/docs/api/java/lang/Object.html?is-external=true#toString()" title="class or interface in java.lang">
              toString
             </a>
            </code>
            in class
            <code>
             <a href="http://download.oracle.com/javase/1.5.0/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">
              Object
             </a>
            </code>
           </dd>
          </dl>
         </li>
        </ul>
       </li>
      </ul>
     </li>
    </ul>
   </div>
  </div>
  <!-- ========= END OF CLASS DATA ========= -->
  <!-- ======= START OF BOTTOM NAVBAR ====== -->
  <div class="bottomNav">
   <a name="navbar_bottom">
    <!-- -->
   </a>
   <a href="#skip-navbar_bottom" title="Skip navigation links">
   </a>
   <a name="navbar_bottom_firstrow">
    <!-- -->
   </a>
   <ul class="navList" title="Navigation">
    <li>
     <a href="../../../../overview-summary.html">
      Overview
     </a>
    </li>
    <li>
     <a href="package-summary.html">
      Package
     </a>
    </li>
    <li class="navBarCell1Rev">
     Class
    </li>
    <li>
     <a href="class-use/UpgradeIndexMergePolicy.html">
      Use
     </a>
    </li>
    <li>
     <a href="package-tree.html">
      Tree
     </a>
    </li>
    <li>
     <a href="../../../../deprecated-list.html">
      Deprecated
     </a>
    </li>
    <li>
     <a href="../../../../index-all.html">
      Index
     </a>
    </li>
    <li>
     <a href="../../../../help-doc.html">
      Help
     </a>
    </li>
   </ul>
  </div>
  <div class="subNav">
   <ul class="navList">
    <li>
     <a href="../../../../org/apache/lucene/index/TieredMergePolicy.MergeScore.html" title="class in org.apache.lucene.index">
      <span class="strong">
       Prev Class
      </span>
     </a>
    </li>
    <li>
     Next Class
    </li>
   </ul>
   <ul class="navList">
    <li>
     <a href="../../../../index.html?org/apache/lucene/index/UpgradeIndexMergePolicy.html" target="_top">
      Frames
     </a>
    </li>
    <li>
     <a href="UpgradeIndexMergePolicy.html" target="_top">
      No Frames
     </a>
    </li>
   </ul>
   <ul class="navList" id="allclasses_navbar_bottom">
    <li>
     <a href="../../../../allclasses-noframe.html">
      All Classes
     </a>
    </li>
   </ul>
   <div>
    <script type="text/javascript">
     <!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
    </script>
   </div>
   <div>
    <ul class="subNavList">
     <li>
      Summary:
     </li>
     <li>
      <a href="#nested_classes_inherited_from_class_org.apache.lucene.index.MergePolicy">
       Nested
      </a>
      |
     </li>
     <li>
      <a href="#field_summary">
       Field
      </a>
      |
     </li>
     <li>
      <a href="#constructor_summary">
       Constr
      </a>
      |
     </li>
     <li>
      <a href="#method_summary">
       Method
      </a>
     </li>
    </ul>
    <ul class="subNavList">
     <li>
      Detail:
     </li>
     <li>
      <a href="#field_detail">
       Field
      </a>
      |
     </li>
     <li>
      <a href="#constructor_detail">
       Constr
      </a>
      |
     </li>
     <li>
      <a href="#method_detail">
       Method
      </a>
     </li>
    </ul>
   </div>
   <a name="skip-navbar_bottom">
    <!-- -->
   </a>
  </div>
  <!-- ======== END OF BOTTOM NAVBAR ======= -->
  <p class="legalCopy">
   <small>
    <script src="../../../../prettify.js" type="text/javascript">
    </script>
    <script type="text/javascript">
     (function(){
              var oldonload = window.onload;
              if (typeof oldonload != 'function') {
                window.onload = prettyPrint;
              } else {
                window.onload = function() {
                  oldonload();
                  prettyPrint();
                }
              }
            })();
    </script>
   </small>
  </p>
 </body>
</html></DOC>